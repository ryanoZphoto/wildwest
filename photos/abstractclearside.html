<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Abstractclearside – Wild West Wall Art</title>
  <meta name="robots" content="index,follow" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <nav class="nav" aria-label="Primary">
    <div class="nav-inner">
      <a class="nav-brand" href="/index.html">
        <img src="/finlogo.png" alt="Wild West Wall Art logo" class="logo">
        <span>Wild West Wall Art</span>
      </a>
      <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Toggle menu">☰</button>
      <ul id="nav-menu" class="nav-links">
        <li><a href="/index.html">Home</a></li>
        <li><a href="/gallery.html">Gallery</a></li>
        <li><a href="/cart.html">Cart</a></li>
        <li><a href="/contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>

  <main style="padding: 1.5rem 1rem;">
    <h1 id="photo-title">Abstractclearside</h1>
    <div class="finish-tabs" role="tablist" aria-label="Finish options">
      <button data-finish="canvas" class="active" role="tab" aria-selected="true">Canvas</button>
      <button data-finish="metal" role="tab" aria-selected="false">Metal</button>
      <button data-finish="acrylic" role="tab" aria-selected="false">Acrylic</button>
    </div>
    <div id="preview-container" class="preview-container" aria-live="polite"></div>
    <a id="order-btn" class="order-cta" href="#">Order This Print</a>
  </main>

  <script>
  (function(){
    const btn = document.querySelector('.nav-toggle');
    const menu = document.getElementById('nav-menu');
    if (btn && menu) {
      btn.addEventListener('click', () => {
        const open = menu.classList.toggle('open');
        btn.setAttribute('aria-expanded', String(open));
      });
    }
  })();
  </script>
  <script>
  (function(){
    var img = "abstractclearside.jpg";
    var baseName = img.replace(/.[^.]+$/, '');
    var titleText = "Abstractclearside";
    document.getElementById('photo-title').textContent = titleText;

    var previewContainer = document.getElementById('preview-container');
    var orderBtn = document.getElementById('order-btn');
    var currentFinish = 'canvas';

    function imgExists(src){
      return new Promise(function(resolve){
        var i = new Image();
        i.onload = function(){ resolve(src); };
        i.onerror = function(){ resolve(null); };
        i.src = src;
      });
    }

    async function loadFinishVariants(finish){
      currentFinish = finish;
      previewContainer.innerHTML = '';
      var folder = '/' + finish + '_previews';
      var candidates = [];
      var exts = ['jpg','jpeg','png'];
      exts.forEach(function(ext){ candidates.push(folder + '/' + baseName + '_' + finish + '.' + ext); });
      for (var n=1; n<=2; n++) { exts.forEach(function(ext){ candidates.push(folder + '/' + baseName + '_' + finish + n + '.' + ext); }); }
      exts.forEach(function(ext){ candidates.push(folder + '/' + baseName + '_' + finish + '_variant.' + ext); });

      var checks = await Promise.all(candidates.map(imgExists));
      var valid = checks.filter(Boolean).slice(0, 6);
      if (valid.length === 0) {
        var el = document.createElement('img');
        el.src = "/images/abstractclearside.jpg";
        el.alt = titleText + ' (' + finish + ')';
        el.loading = 'lazy';
        el.decoding = 'async';
        previewContainer.style.gridTemplateColumns = 'repeat(auto-fit, minmax(300px, 1fr))';
        previewContainer.appendChild(el);
        return;
      }
      var colMin = valid.length >= 3 ? 300 : (valid.length === 2 ? 350 : 480);
      previewContainer.style.gridTemplateColumns = 'repeat(auto-fit, minmax(' + colMin + 'px, 1fr))';
      valid.forEach(function(src){
        var el = document.createElement('img');
        el.src = src;
        el.alt = titleText + ' (' + finish + ')';
        el.loading = 'lazy';
        el.decoding = 'async';
        previewContainer.appendChild(el);
      });
    }

    document.querySelectorAll('.finish-tabs button').forEach(function(btn){
      btn.addEventListener('click', function(){
        document.querySelectorAll('.finish-tabs button').forEach(function(b){ b.classList.remove('active'); });
        btn.classList.add('active');
        loadFinishVariants(btn.getAttribute('data-finish'));
      });
    });

    orderBtn.addEventListener('click', function(e){
      e.preventDefault();
      var url = new URL('/cart.html', window.location.origin);
      url.searchParams.set('img', img);
      url.searchParams.set('finish', currentFinish);
      url.searchParams.set('title', titleText);
      window.location.href = url.pathname + url.search;
    });

    // Honor finish parameter if provided
    try {
      var params = new URLSearchParams(window.location.search);
      var initial = (params.get('finish') || 'canvas').toLowerCase();
      var btn = document.querySelector('.finish-tabs button[data-finish="' + initial + '"]');
      if (btn) {
        document.querySelectorAll('.finish-tabs button').forEach(function(b){ b.classList.remove('active'); });
        btn.classList.add('active');
        loadFinishVariants(initial);
      } else {
        loadFinishVariants('canvas');
      }
    } catch (e) {
      loadFinishVariants('canvas');
    }
  })();
  </script>
</body>
</html>